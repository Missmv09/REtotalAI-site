<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Deal Analyzer</title>
    <link rel="stylesheet" href="../../css/styles.css" />
  </head>
  <body>
    <div class="container">
      <h1>Deal Analyzer</h1>
      <form id="analyzerForm" novalidate>
        <div class="input-group">
          <label for="purchase">Purchase Price</label>
          <input type="number" id="purchase" required min="0" step="0.01" />
        </div>
        <div class="input-group">
          <label for="rent">Monthly Rent</label>
          <input type="number" id="rent" required min="0" step="0.01" />
        </div>
        <div class="input-group">
          <label for="expenses">Annual Expenses</label>
          <input type="number" id="expenses" required min="0" step="0.01" />
        </div>
        <div class="input-group">
          <label for="vacancy">Vacancy Rate (%)</label>
          <input
            type="number"
            id="vacancy"
            required
            min="0"
            max="100"
            step="0.01"
          />
        </div>
        <button type="submit">Analyze</button>
      </form>
      <div id="results">
        <div class="result-box">
          <h2>Monthly Cash Flow</h2>
          <p id="cashFlow">-</p>
        </div>
        <div class="result-box">
          <h2>ROI</h2>
          <p id="roi">-</p>
        </div>
        <div class="result-box">
          <h2>Cap Rate</h2>
          <p id="capRate">-</p>
        </div>
      </div>
    </div>
    <script>
      const form = document.getElementById("analyzerForm");
      form.addEventListener("submit", function (e) {
        e.preventDefault();
        if (!form.checkValidity()) {
          form.reportValidity();
          return;
        }

        const purchase = parseFloat(document.getElementById("purchase").value);
        const rent = parseFloat(document.getElementById("rent").value);
        const expenses = parseFloat(document.getElementById("expenses").value);
        const vacancy = parseFloat(document.getElementById("vacancy").value);

        const grossAnnualRent = rent * 12;
        const effectiveRent = grossAnnualRent * (1 - vacancy / 100);
        const noi = effectiveRent - expenses;
        const monthlyCashFlow = noi / 12;
        const roi = purchase ? (noi / purchase) * 100 : 0;
        const capRate = roi;

        document.getElementById("cashFlow").textContent =
          "$" + monthlyCashFlow.toFixed(2);
        document.getElementById("roi").textContent = roi.toFixed(2) + "%";
        document.getElementById("capRate").textContent =
          capRate.toFixed(2) + "%";
      });
    </script>
  </body>
</html>
